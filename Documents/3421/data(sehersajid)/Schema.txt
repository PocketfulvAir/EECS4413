
DROP TABLE IF EXISTS Method CASCADE;
DROP TABLE IF EXISTS Place CASCADE;
DROP TABLE IF EXISTS TestCenter CASCADE;
DROP TABLE IF EXISTS TimeSlot CASCADE;
DROP TABLE IF EXISTS Test CASCADE;
DROP TABLE IF EXISTS TestType CASCADE;
DROP TABLE IF EXISTS Action CASCADE;
DROP TABLE IF EXISTS Person CASCADE;
DROP TABLE IF EXISTS Recon CASCADE;
DROP TABLE IF EXISTS offer CASCADE;

CREATE TABLE Person (
  sin    SERIAL NOT NULL, 
  name   varchar(30), 
  adress varchar(50), 
  phone  varchar(30), 
  PRIMARY KEY (sin)
);

CREATE TABLE Method (
  method varchar(30) NOT NULL, 
  PRIMARY KEY (method)
);

CREATE TABLE Action (
  aciton varchar(30) NOT NULL, 
  PRIMARY KEY (aciton)
);

CREATE TABLE TimeSlot (
  time varchar(30) NOT NULL, 
  PRIMARY KEY (time)
);

CREATE TABLE Place (
  name        varchar(30) NOT NULL, 
  gps         varchar(30), 
  description varchar(100), 
  address     varchar(50), 
  PRIMARY KEY (name)
);

CREATE TABLE TestCenter (
  TestCenter varchar(30) NOT NULL, 
  PRIMARY KEY (TestCenter));
ALTER TABLE TestCenter ADD CONSTRAINT FKTestCenter995994 FOREIGN KEY (TestCenter) REFERENCES Place (name);
			  
CREATE TABLE TestType (
  TestType varchar(30) NOT NULL, 
  PRIMARY KEY (TestType));

CREATE TABLE Test (
  Person_sin int4 NOT NULL, 
  TimeSlot   varchar(30) NOT NULL, 
  TestCenter varchar(30) NOT NULL, 
  TestType   varchar(30) NOT NULL, 
  Action     varchar(30) NOT NULL, 
  PRIMARY KEY (Person_sin, TimeSlot, TestCenter, TestType, 
  Action));
ALTER TABLE Test ADD CONSTRAINT FKTest340812 FOREIGN KEY (Person_sin) REFERENCES Person (sin);
ALTER TABLE Test ADD CONSTRAINT FKTest634600 FOREIGN KEY (TimeSlot) REFERENCES TimeSlot (time);
ALTER TABLE Test ADD CONSTRAINT FKTest226863 FOREIGN KEY (TestCenter) REFERENCES TestCenter (TestCenter);
ALTER TABLE Test ADD CONSTRAINT FKTest194865 FOREIGN KEY (TestType) REFERENCES TestType (TestType);
ALTER TABLE Test ADD CONSTRAINT FKTest866689 FOREIGN KEY (Action) REFERENCES Action (aciton);

CREATE TABLE Recon (
  Person_sin int4 NOT NULL, 
  Method     varchar(30) NOT NULL, 
  Place_name varchar(30) NOT NULL, 
  TimeSlot   varchar(30) NOT NULL, 
  PRIMARY KEY (Person_sin, 
  Method, 
  Place_name, 
  TimeSlot));
ALTER TABLE Recon ADD CONSTRAINT FKRecon574005 FOREIGN KEY (Person_sin) REFERENCES Person (sin);
ALTER TABLE Recon ADD CONSTRAINT FKRecon127681 FOREIGN KEY (Method) REFERENCES Method (method);
ALTER TABLE Recon ADD CONSTRAINT FKRecon724098 FOREIGN KEY (Place_name) REFERENCES Place (name);
ALTER TABLE Recon ADD CONSTRAINT FKRecon867793 FOREIGN KEY (TimeSlot) REFERENCES TimeSlot (time);

CREATE TABLE offer (
  TestType   varchar(30) NOT NULL, 
  TestCenter varchar(30) NOT NULL, 
  PRIMARY KEY (TestType, 
  TestCenter));
ALTER TABLE offer ADD CONSTRAINT FKoffer242562 FOREIGN KEY (TestType) REFERENCES TestType (TestType);
ALTER TABLE offer ADD CONSTRAINT FKoffer274560 FOREIGN KEY (TestCenter) REFERENCES TestCenter (TestCenter);
			   